local Library = {}

-- Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- =====================
-- UI SETUP
-- =====================

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling


local SaturnFrame = Instance.new("Frame")
SaturnFrame.Parent = ScreenGui
SaturnFrame.Size = UDim2.new(0, 500, 0, 420)
SaturnFrame.Position = UDim2.new(0.3, 0, 0.25, 0)
SaturnFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
SaturnFrame.BorderSizePixel = 0
SaturnFrame.Active = true
SaturnFrame.Draggable = true
Instance.new("UICorner", SaturnFrame).CornerRadius = UDim.new(0, 10)
Instance.new("UIStroke", SaturnFrame).Color = Color3.fromRGB(90, 90, 90)

-- Title
local Title = Instance.new("TextLabel", SaturnFrame)
Title.Size = UDim2.new(1, 0, 0, 50)
Title.BackgroundTransparency = 1
Title.Text = "Saturn"
Title.Font = Enum.Font.SourceSansBold
Title.TextScaled = true
Title.TextColor3 = Color3.new(1, 1, 1)

local Exit = Instance.new("TextButton", Title)
Exit.Size = UDim2.new(0, 40, 0, 30)
Exit.Position = UDim2.new(0.9, 0, 0, 0)
Exit.Text = "X"
Exit.Font = Enum.Font.SourceSansBold
Exit.TextScaled = true
Exit.TextColor3 = Color3.fromRGB(255, 0, 0)
Exit.BackgroundTransparency = 1
Exit.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

-- Dividers
local Vertical = Instance.new("Frame", SaturnFrame)
Vertical.Size = UDim2.new(0, 7, 0, 363)
Vertical.Position = UDim2.new(0.176, 0, 0.136, 0)
Vertical.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Vertical.BorderSizePixel = 0

local Horizontal = Instance.new("Frame", SaturnFrame)
Horizontal.Size = UDim2.new(1, 0, 0, 7)
Horizontal.Position = UDim2.new(0, 0, 0.136, 0)
Horizontal.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
Horizontal.BorderSizePixel = 0

-- Tab Holder
local TabHolder = Instance.new("Frame", SaturnFrame)
TabHolder.Size = UDim2.new(0, 90, 0, 300)
TabHolder.Position = UDim2.new(0, 0, 0.335, 0)
TabHolder.BackgroundTransparency = 1

local TabLayout = Instance.new("UIListLayout", TabHolder)
TabLayout.Padding = UDim.new(0, 10)

-- Content Holder
local ContentHolder = Instance.new("Frame", SaturnFrame)
ContentHolder.Size = UDim2.new(0, 380, 0, 350)
ContentHolder.Position = UDim2.new(0.23, 0, 0.17, 0)
ContentHolder.BackgroundTransparency = 1

-- =====================
-- TAB SYSTEM
-- =====================

Library.Tabs = {}
Library.CurrentTab = nil
local Indicators = {}

local function hideTabs()
	for _, tab in pairs(Library.Tabs) do
		tab.Container.Visible = false
	end
	for _, img in ipairs(Indicators) do
		img.Visible = false
		img.ImageTransparency = 1
	end
end

function Library:SelectTab(name)
	hideTabs()
	local tab = Library.Tabs[name]
	if not tab then return end
	tab.Container.Visible = true
	tab.Indicator.Visible = true
	Library.CurrentTab = tab
	TweenService:Create(tab.Indicator, TweenInfo.new(0.25), {ImageTransparency = 0}):Play()
end

-- =====================
-- CREATE TAB
-- =====================

function Library:CreateTab(name)
	local button = Instance.new("TextButton", TabHolder)
	button.Size = UDim2.new(1, 0, 0, 20)
	button.BackgroundTransparency = 1
	button.Text = name
	button.Font = Enum.Font.SourceSansBold
	button.TextSize = 18
	button.TextColor3 = Color3.fromRGB(167, 167, 167)

	local indicator = Instance.new("ImageLabel", button)
	indicator.Size = UDim2.new(0, 7, 0, 8)
	indicator.Position = UDim2.new(0.1, 0, 0.3, 0)
	indicator.Image = "rbxassetid://6031625146"
	indicator.ImageColor3 = Color3.fromRGB(100, 160, 255)
	indicator.BackgroundTransparency = 1
	indicator.Visible = false
	indicator.ImageTransparency = 1

	table.insert(Indicators, indicator)

	local scroll = Instance.new("ScrollingFrame", ContentHolder)
	scroll.Size = UDim2.new(0.97, 0, 1, 0)
	scroll.ScrollBarImageTransparency = 1
	scroll.BackgroundTransparency = 1
	scroll.Visible = false

	local padding = Instance.new("UIPadding", scroll)
	padding.PaddingTop = UDim.new(0, 20)
	padding.PaddingLeft = UDim.new(0, 6)
	padding.PaddingRight = UDim.new(0, 6)

	local layout = Instance.new("UIListLayout", scroll)
	layout.Padding = UDim.new(0, 12)
	layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
		scroll.CanvasSize = UDim2.new(0, 0, 0, layout.AbsoluteContentSize.Y + 14)
	end)

	Library.Tabs[name] = {
		Container = scroll,
		Indicator = indicator
	}

	button.MouseButton1Click:Connect(function()
		Library:SelectTab(name)
	end)
end

-- =====================
-- CREATE BUTTON
-- =====================

function Library:CreateButton(text, callback)
	if not Library.CurrentTab then return end

	local button = Instance.new("TextButton", Library.CurrentTab.Container)
	button.Size = UDim2.new(1, 0, 0, 32)
	button.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	button.Text = " ".. text
	button.Font = Enum.Font.SourceSansBold
	button.TextSize = 15
	button.TextColor3 = Color3.fromRGB(220, 220, 220)
	button.BorderSizePixel = 0
	button.AutoButtonColor = false
	button.TextXAlignment = Enum.TextXAlignment.Left

	Instance.new("UICorner", button)
	Instance.new("UIStroke", button).Color = Color3.fromRGB(70, 70, 70)


	button.MouseButton1Click:Connect(function()
		if callback then callback() end
	end)
end

-- =====================
-- CREATE TOGGLE
-- =====================

function Library:CreateToggle(text, default, callback)
	if not Library.CurrentTab then return end
	local container = Library.CurrentTab.Container
	local toggled = default or false 

	local toggleButton = Instance.new("TextButton", container)
	toggleButton.Size = UDim2.new(1, 0, 0, 32)
	toggleButton.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	toggleButton.BorderSizePixel = 0
	toggleButton.Text = ""
	toggleButton.AutoButtonColor = false
	Instance.new("UICorner", toggleButton)
	Instance.new("UIStroke", toggleButton).Color = Color3.fromRGB(70, 70, 70)

	local label = Instance.new("TextLabel", toggleButton)
	label.Size = UDim2.new(0.7, 0, 1, 0)
	label.Position = UDim2.new(0, 10, 0, 0)
	label.BackgroundTransparency = 1
	label.Text = text
	label.Font = Enum.Font.SourceSansBold
	label.TextSize = 15
	label.TextColor3 = Color3.fromRGB(220, 220, 220)
	label.TextXAlignment = Enum.TextXAlignment.Left

	local toggleBg = Instance.new("Frame", toggleButton)
	toggleBg.Size = UDim2.new(0, 42, 0, 20)
	toggleBg.Position = UDim2.new(1, -55, 0.5, -10)
	toggleBg.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
	toggleBg.BorderSizePixel = 0
	toggleBg.ClipsDescendants = true
	Instance.new("UICorner", toggleBg).CornerRadius = UDim.new(0, 10)

	local toggleCircle = Instance.new("Frame", toggleBg)
	toggleCircle.Size = UDim2.new(0, 16, 0, 16)
	toggleCircle.Position = toggled and UDim2.new(1, -18, 0, 2) or UDim2.new(0, 2, 0, 2)
	toggleCircle.BackgroundColor3 = toggled and Color3.fromRGB(0, 255, 255) or Color3.fromRGB(150, 150, 150)
	toggleCircle.BorderSizePixel = 0
	Instance.new("UICorner", toggleCircle).CornerRadius = UDim.new(0, 8)

	local tweenInfo = TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)

	toggleButton.MouseButton1Click:Connect(function()
		toggled = not toggled
		TweenService:Create(toggleCircle, tweenInfo, {
			Position = toggled and UDim2.new(1, -18, 0, 2) or UDim2.new(0, 2, 0, 2),
			BackgroundColor3 = toggled and Color3.fromRGB(0, 255, 255) or Color3.fromRGB(150, 150, 150)
		}):Play()
		TweenService:Create(toggleBg, tweenInfo, {
			BackgroundColor3 = toggled and Color3.fromRGB(40, 40, 40) or Color3.fromRGB(70, 70, 70)
		}):Play()
		if callback then
			pcall(callback, toggled)
		end
	end)
end

-- =====================
-- PLAYER PROFILE IMAGE ON HOME WITH NAME
-- =====================

function Library:CreateHomeProfile()
	if not Library.Tabs["Home"] then return end
	local container = Library.Tabs["Home"].Container

	-- Profile image
	local profile = Instance.new("ImageLabel")
	profile.Size = UDim2.new(0, 100, 0, 100)
	profile.Position = UDim2.new(0.5, -50, 0, 20)
	profile.BackgroundTransparency = 1
	profile.Parent = container
	Instance.new("UICorner", profile).CornerRadius = UDim.new(0.5, 0)

	local uicorner = Instance.new("UICorner")
	uicorner.CornerRadius = UDim.new(0.5, 0)
	uicorner.Parent = profile

	local success, content = pcall(function()
		return Players:GetUserThumbnailAsync(LocalPlayer.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size420x420)
	end)

	if success then
		profile.Image = content
	else
		profile.Image = ""
	end

	-- Invisible background for name (next to profile)
	local nameFrame = Instance.new("TextLabel")
	nameFrame.Size = UDim2.new(0, 120, 0, 30)
	nameFrame.Position = UDim2.new(1, 15, 0.5, -15) 
	nameFrame.BackgroundTransparency = 1
	nameFrame.Text = LocalPlayer.Name
	nameFrame.Font = Enum.Font.SourceSansBold
	nameFrame.TextSize = 18
	nameFrame.TextColor3 = Color3.new(1,1,1)
	nameFrame.TextXAlignment = Enum.TextXAlignment.Left
	nameFrame.Parent = profile
	nameFrame.TextScaled = true

end




-- =====================
-- SETUP TABS
-- =====================

Library:CreateTab("Home")
Library:CreateTab("Player")
Library:CreateTab("Auto")

-- =====================
-- SCRIPT
-- =====================

local flySpeed = 40
local flyKeys = {w=false, a=false, s=false, d=false}
local flyLoop
local bodyPos, bodyGyro
local mouse

local function waitForMouse()
	if LocalPlayer.Character then
		mouse = LocalPlayer:GetMouse()
	else
		LocalPlayer.CharacterAdded:Wait()
		wait(0.1)
		mouse = LocalPlayer:GetMouse()
	end
end
waitForMouse()

local function stopFly()
	if flyLoop then flyLoop:Disconnect() flyLoop = nil end
	if bodyPos then bodyPos:Destroy() bodyPos = nil end
	if bodyGyro then bodyGyro:Destroy() bodyGyro = nil end
	if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
		LocalPlayer.Character.Humanoid.PlatformStand = false
	end
end

local function startFly()
	if not LocalPlayer.Character or not LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then return end
	stopFly()

	local torso = LocalPlayer.Character.HumanoidRootPart
	bodyPos = Instance.new("BodyPosition")
	bodyPos.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
	bodyPos.Position = torso.Position
	bodyPos.P = 10000
	bodyPos.D = 1000
	bodyPos.Parent = torso

	bodyGyro = Instance.new("BodyGyro")
	bodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
	bodyGyro.CFrame = torso.CFrame
	bodyGyro.P = 10000
	bodyGyro.D = 1000
	bodyGyro.Parent = torso

	LocalPlayer.Character.Humanoid.PlatformStand = true

	flyLoop = RunService.RenderStepped:Connect(function()
		if not torso or not torso.Parent then stopFly() return end
		local cam = workspace.CurrentCamera
		local moveVector = Vector3.new(0, 0, 0)
		if flyKeys.w then moveVector += cam.CFrame.LookVector end
		if flyKeys.s then moveVector -= cam.CFrame.LookVector end
		if flyKeys.a then moveVector -= cam.CFrame.RightVector end
		if flyKeys.d then moveVector += cam.CFrame.RightVector end
		if moveVector.Magnitude > 0 then moveVector = moveVector.Unit * flySpeed end
		bodyPos.Position = torso.Position + moveVector
		bodyGyro.CFrame = CFrame.new(torso.Position, torso.Position + cam.CFrame.LookVector)
	end)
end

spawn(function()
	while not mouse do wait() end
	mouse.KeyDown:Connect(function(key)
		if key == "w" then flyKeys.w = true
		elseif key == "s" then flyKeys.s = true
		elseif key == "a" then flyKeys.a = true
		elseif key == "d" then flyKeys.d = true end
		if key == "x" then
			if flyLoop then stopFly() else startFly() end
		end
	end)
	mouse.KeyUp:Connect(function(key)
		if key == "w" then flyKeys.w = false
		elseif key == "s" then flyKeys.s = false
		elseif key == "a" then flyKeys.a = false
		elseif key == "d" then flyKeys.d = false
		end
	end)
end)



-- =====================
-- LOAD DEFAULT TABS
-- =====================

Library:SelectTab("Home")
Library:CreateHomeProfile()


-- Player Tabs
Library:SelectTab("Player")
Library:CreateToggle("Fly", false, function(state)
	if state then
		startFly()
	else
		stopFly()
	end
end)

Library:CreateToggle(" NoClip", false, function(state)
	local character = LocalPlayer.Character or LocalPlayer.characterAdded:Wait()
	
	local function applyNoclip(enabled)
		for _, part in ipairs(character:GetDescendants()) do 
			if part:IsA("BasePart") then
				part.CanCollide  = not enabled
			end
		end
	end
	
	applyNoclip()
	
	if state then
		if _G.NoClipLoop then _G.NoClipLoop:Disconnect() end
		_G.NoClipLoop = RunService.Stepped:Connect(function()
			if state then 
				applyNoclip(true)
			end
		end)
	else 
		if _G.NoClipLoop then _G.NoClipLoop:Disconnect() _G.NoClipLoop = nil end
	end
end)

-- Auto Tabs
Library:SelectTab("Auto")

Library:CreateButton(" AutoBuy", function()
	print("AutoBuy")
end)



Library:SelectTab("Home")

return Library
